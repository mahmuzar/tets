Импорт данных из файла.
---
Задача импортировать данных из текстового файла.
Я предположил что данные могут приходить не только из текстового, но и например xml, json.

Поэтому так чтобы можно было легко дописать дополниельный функционал следуя базовым принципам ООП.
Парсинг файла сделал через [команду](https://github.com/mahmuzar/tets/tree/master/src/Command/Parser), 
ибо имеет смысл (возможно это будет крон-задачей).

В этом пакете у нас 3 класса и 1 интерфейс.
1. Это интерфейс в котором объявлена одна функция
2. Cама команда, где и будем использовать все остальные классы.
3. Класс для генераци конкретного объекта парсера. В данный момент для генерации будем опираться на расширение файла.
4. Конкретный класс, именно для парсинга из текстового файла.

в итоге у нас в команде получится такой код:
```php
    protected function execute(InputInterface $input, OutputInterface $output): int {
        //пока не понятно где будут лежать файлы и как будем их получать.
        //это будет костылем,пропишем путь к файлу тут.
        $filePath = __DIR__ . '/../../../data/file.txt';
        
        $parserInstance = ParserInstanceCreater::getInstance($filePath);
        $data = $parserInstance->parse($filePath);

        foreach ($data as $val) {
            if (!empty($val['phone'])) {
                $customer = new Customers();
                $customer->setPhone($val['phone']);
                $customer->setComment($val['comment']);

                $this->em->persist($customer);
                $this->em->flush();
            }
            usleep(500);
        }
        return 0;
    }
```
Путь к файлу можно было бы в конфиг. Подумал что нюансов с файлами, 
или с хранилищем каким то может быть много пока для демонстрации прописал в коде так.

Если мы заходим добавить поддержку другого типа файла, на всего лишь надо будет создать новый класс 
реализовав интерфейс парсера, и учесть его создание в классе генераторе объекта для парсинга.

Т.е. нам не пришлось менять функционал который уже есть.

Сервис REST-API
---
Задача создать методы
* метод получения списка со всеми полями созданной сущности
* метод проверки, находится ли запрошенный телефон в списке

Создал контроллер для работы с api. Если бы мне надо было проектировать полноценное api то ApiController 
выступал бы родителем для других контроллеров конретных сушностей, в данномслучае PhonesController. 
И так для других сущностей тоже.
Тут я ограничился одним контроллером для демонтсрации. ( и еще я изачально назвал модель 
Customers но стоило бы Phones. Менять не стал.

Есть [трейт](https://github.com/mahmuzar/tets/blob/master/src/Traits/ApiResponseHelper.php), 
который будет работать с выходными данными. 

Рассмотрим функцию [read](https://github.com/mahmuzar/tets/blob/c0523589a246cc34ff7d77a74be7542173b6aece/src/Controller/ApiController.php#L30)
Я обошелся одной функцией для обоих пунктов задачи.
Для получения всего списка данных по этой сушности будет ссылка такая:  
```/api/phones/```
если конкретный телефон, то: ```/api/phones/9888888/```

Если телефон не будет найден будет сгенерировано сообщение о том что нету телефона с ошибкой 404
```
status	404
message	"Телефон в базе не найден"
data	[]
```
Иначе 200 и данные

У меня в примере вываливается весь список телефонов, что не правильно, надо использовать лимит, но для примера я не стал усложнять.
